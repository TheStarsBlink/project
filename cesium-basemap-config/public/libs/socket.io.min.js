/*!
 * Socket.IO v4.7.5
 * (c) 2014-2023 Guillermo Rauch
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).io=e()}(this,(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,"symbol"==typeof(i=r.key)?i:String(i),r);}var i}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,n){return u=c()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i},u.apply(null,arguments)}function h(t){var e="function"==typeof Map?new Map:void 0;return h=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return u(t,arguments,s(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)},h(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function p(t){var e=c();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function d(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=d(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},y.apply(this,arguments)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var m=Object.create(null);m.open="0",m.close="1",m.ping="2",m.pong="3",m.message="4",m.upgrade="5",m.noop="6";var b=Object.create(null);Object.keys(m).forEach((function(t){b[m[t]]=t}));for(var k={type:"error",data:"parser error"},w="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),_="function"==typeof ArrayBuffer,E=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="undefined"==typeof Uint8Array?[]:new Uint8Array(256),R=0;R<O.length;R++)A[O.charCodeAt(R)]=R;var T="function"==typeof ArrayBuffer,C=function(t,e){if("string"!=typeof t)return{type:"message",data:S(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:B(t.substring(1),e)}:{type:b[n]?b[n]:"message",data:b[n]?t.substring(1):t}},B=function(t,e){if(T){var n=function(t){var e,n,r,i,o,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),h=new Uint8Array(u);for(e=0;e<a;e+=4)n=A[t.charCodeAt(e)],r=A[t.charCodeAt(e+1)],i=A[t.charCodeAt(e+2)],o=A[t.charCodeAt(e+3)],h[c++]=n<<2|r>>4,h[c++]=(15&r)<<4|i>>2,h[c++]=(3&i)<<6|63&o;return u}(t);return S(n,e)}return{base64:!0,data:t}},S=function(t,e){return"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t},L=String.fromCharCode(30),N=function(t){function n(r){var i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,n),i=f.call(this),i.binaryType=r||"arraybuffer",i.options=s,i.isOpen=!1,i.socket=null,i.prevBufferLen=0,i.readyState=n.CONNECTING,null!=(o=s.sendCallback)&&o.call(f(i)),i}o(n,t);var i=p(n);return r(n,[{key:"onData",value:function(t){var e=C(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){this.readyState===n.OPEN&&("message"===t.type&&this.onMessage(t),this.emit("packet",t))}},{key:"onMessage",value:function(t){this.emit("data",t.data),this.emit("message",t.data)}},{key:"write",value:function(e){var n=this;this.readyState!==n.OPEN||this.prevBufferLen?(this.buffer=[].concat(this.buffer||[],e),this.setupSendCallback()):this.socket.send(e);var r=this.buffer?this.buffer.length:0;this.prevBufferLen=r,0===r&&setTimeout((function(){n.emit("drain")}),0)}},{key:"setupSendCallback",value:function(){var t=this;if(null==this.sendCallback){var e=this.options.sendCallback;null!=e&&(this.sendCallback=function(){e.call(t,t.buffer),t.buffer=[],t.prevBufferLen=0})}}},{key:"onOpen",value:function(){this.readyState=n.OPEN,this.prevBufferLen=0,this.emit("open"),this.setupSendCallback()}},{key:"onClose",value:function(){this.readyState=n.CLOSED,this.emit("close")}},{key:"onError",value:function(t){this.emit("error",t)}},{key:"close",value:function(){this.readyState!==n.CLOSED&&this.readyState!==n.CLOSING&&(this.readyState=n.CLOSING,this.doClose())}},{key:"doClose",value:function(){"function"==typeof this.socket.close?this.socket.close():this.onClose()}},{key:"send",value:function(t){this.write(t)}}]),n}(h(EventTarget));N.CONNECTING=0,N.OPEN=1,N.CLOSING=2,N.CLOSED=3;var x=location.protocol.indexOf("http")>=0?location.hostname:"localhost",P="https:"===location.protocol?"wss://":"ws://",q=P+x+"/socket.io/?EIO=4&transport=websocket";function j(t){t(new Error("not implemented"))}var I=function(t){o(i,t);var n=p(i);function i(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,i),r=n.call(this,"",o),r.opts=o,r.query=o.query,r.socket=t,r.readyState="",r.writeBuffer=[],r}return r(i,[{key:"connect",value:function(t){var e=this,n=this.socket,r=this.opts,i=this.query;if(r.forceNew||"function"!=typeof io||io.protocol!==4)return new Error("not implemented");return i&&(i=Object.keys(i).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(i[t]))})).join("&")),this.readyState="opening",n&&n.connected?this.onOpen():setTimeout((function(){e.onError("no socket connection")}),0),this}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.write(e),this}},{key:"write",value:function(t){var e=this;return this.readyState!=="open"?j((function(t){e.onError("not open")})):this.socket.send(t),this}},{key:"onOpen",value:function(){this.readyState="open",this.emit("open"),this.flush()}},{key:"onPacket",value:function(t){"message"===t.type?this.emit("message",t.data):this.emit("packet",t)}},{key:"flush",value:function(){if("open"===this.readyState&&this.writeBuffer.length){var t=this.writeBuffer;this.writeBuffer=[],this.socket.send(t)}}}]),i}(h(EventTarget)),D=function(t){o(n,t);var e=p(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,n),r=e.call(this),r.nsps={},r.ids=0,r.connected={},r.attempts=0,"object"===typeof t&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",r.opts=i,r.uri=t,r.autoConnect=!1!==i.autoConnect,r.autoConnect&&r.connect(),r}return r(n,[{key:"connect",value:function(){var t=this;if(this.connected&&Object.keys(this.connected).length)return this;return this.engine=new N(this.uri,this.opts),this.engine.onpacket=function(e){t.onPacket(e)},this.engine.onOpen=function(){t.onOpen()},this.engine.onClose=function(){t.onClose("transport close")},this.engine.onError=function(e){t.onError(e)},this.attempts=0,this.id=null,this.connected={},this.emitBuffered=[],this}},{key:"onPacket",value:function(t){var e=this,n=t.nsp||"/",r=t.id;switch(t.type){case"connect":null==r?j((function(t){e.onError(t)})):this.onConnect(r);break;case"disconnect":this.onDisconnect();break;case"message":case"event":this.onEvent(t);break;case"binary":case"error":this.onError(new Error("parse error"));break;case"ping":this.resetPingTimeout()}}},{key:"onOpen",value:function(){var t=this;this.emit("open"),this.resetPingTimeout(),this.socket=new I(this,this.opts),this.socket.connect(),this.socket.onOpen=function(){t.onConnect("1")},this.socket.onClose=function(e){t.onClose("socket close")},this.socket.onError=function(e){t.onError(e)},this.socket.onPacket=function(e){t.onPacket(e)}}},{key:"resetPingTimeout",value:function(){var t=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((function(){t.onClose("ping timeout")}),3e4)}},{key:"onConnect",value:function(t){this.id=t,this.connected[t]=this.socket,this.attempts=0,this.emitBuffered.forEach((function(t){this.packet(t)}),this),this.emitBuffered=[],this.emit("connect")}},{key:"onDisconnect",value:function(){delete this.connected[this.id],this.id=null,this.emit("disconnect")}},{key:"onEvent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected[this.id]?this.emit.apply(this,["message"].concat(e)):this.emitBuffered.push(t)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];e.packet({type:"ack",id:t,data:i})}}}},{key:"onError",value:function(t){this.emit("error",t)}},{key:"onClose",value:function(t){this.autoConnect&&this.disconnect().connect(),this.emit("close",t)}},{key:"packet",value:function(t){t.nsp=this.nsp,this.socket.write(t)}},{key:"emit",value:function(){var t=[].slice.call(arguments),e=t[0];if(!(this.connected&&Object.keys(this.connected).length))return this.emitBuffered.push({type:"event",data:t}),this;var n={type:"event",data:t};return this.socket.send(n),this}}]),n}(h(EventTarget));function M(t){t=t||"";var e,n=arguments[1],r=0,i=t.length,o=!1;for("object"==typeof n?(e=0,o=n.raw):(e=1,o=!1);r<i;r++)if("\\"===t[r]&&"\\"!==t[r+1]&&"\""!==t[r+1]&&"'"!==t[r+1])for(;"\\"===t[--r];);return o?t:t.substring(e,i-e?1:0)}function F(t,e){if(e.auth){var n=e.auth.username||"",r=e.auth.password||"";t+="://"+encodeURIComponent(n)+":"+encodeURIComponent(r)+"@"}return t}function U(t,e){var n=e.protocol||"",r=e.secure||"https"===n?"wss":"ws";t+=r+"://";var i=e.host||function(t){var e=M(t),n=!1,r="http",i="localhost";if("wss:"===e.slice(0,4)||"ws:"===e.slice(0,3))n=!0,r=e.indexOf("wss:"),i=e.slice(n?4:3,e.length);else if("http:"===e.slice(0,5)||"https:"===e.slice(0,6))n=!0,r=e.indexOf("https:"),i=e.slice(n?7:6,e.length);return{protocol:n?r:void 0,host:i}}(e.uri);return F(t+i,e)}function V(t,e){var n=e.path||"/socket.io";return t+n.charAt(0)===("/"?n:"/"+n)}function H(t,e){var n="";return e.query&&("object"==typeof e.query?n=Object.keys(e.query).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e.query[t])})).join("&"):n=encodeURIComponent(e.query)),n&&(t+="?"+n),t}function X(){return void 0===window.WebSocket?null:window.WebSocket}var J=function(){return X()?function(t,e){var n=U("",e),r=V(n,e);return r=H(r,e),new D(r,e)}:null};function Y(t,e){if(!(t instanceof D))return new D(t,e);if(t.opts=e||{},t.opts.path=t.opts.path||"/socket.io",t.opts)return t}Y.Manager=D,Y.Socket=I,Y.protocol=4;var K="undefined"!=typeof window?window:Function("return this")();if("undefined"!=typeof K.io)var $=K.io;"undefined"==typeof document;var W=$||J();return W})); 